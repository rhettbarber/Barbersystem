<%= render :partial => 'breadcrumb', :locals => {:crumb => 'department'} %>

<div class="bs-docs-grid">
  <div class="row show-grid">
    <div class="col-lg-12" id="design_departments">
            Design Departments
    </div>
    <% @design_departments.each do |department| %>
            <div class="col-lg-12">
              <a href="#" class="grid_department" data-department_id="<%= department.id %>"><%= department.Name %></a>
              <% department.categories.each do |category| %>
                  <div class="col-lg-12 department_<%= department.id %>_category" style="display: none"><a class="grid_category" href="#"  data-department_id="<%= department.id %>" data-category_id="<%= category.id %>"><%= category.Name %></a></div>
              <% end %>
            </div>
    <% end %>
  </div>
</div>

<script type="text/javascript">
        $('#department_crumb').addClass('current');
        $('#category_crumb').addClass('disabled');


        $('#category_crumb').click(function (e) {
            e.preventDefault();
            if ($(this).hasClass('disabled'))
                return false; // Do something else in here if required
            else
                window.location.href = $(this).attr('href');
        });


</script>













<% if @old %>



    <%= render :partial => 'breadcrumb', :locals => {:crumb => 'department'} %>

    <div class="bs-docs-grid">
      <div class="row show-grid">
        <div class="col-lg-12" id="design_departments">
          Design Departments
        </div>
        <% @design_departments.each do |department| %>
            <div class="col-lg-12">
              <a href="#" class="grid_department" data-department_id="<%= department.id %>"><%= department.Name %></a>
              <% department.categories.each do |category| %>
                  <div class="col-lg-12 department_<%= department.id %>_category" style="display: none"><a class="grid_category" href="#"  data-department_id="<%= department.id %>" data-category_id="<%= category.id %>"><%= category.Name %></a></div>
              <% end %>
            </div>
        <% end %>
      </div>
    </div>

    <script type="text/javascript">
        $('#department_crumb').addClass('current');
        $('#category_crumb').addClass('disabled');


        $('#category_crumb').click(function (e) {
            e.preventDefault();
            if ($(this).hasClass('disabled'))
                return false; // Do something else in here if required
            else
                window.location.href = $(this).attr('href');
        });


    </script>










    <script type="text/javascript">
    $( document ).ready(function() {
        $( ".grid_department" ).click(function() {
//              console.log( "You clicked a gre!" );
//              alert ( $( this).data('department_id') )
//              console.log( "You clicked department: " + 'department_' + department_to_show  );
//                $('.grid_department').hide()

                var department_to_show = $( this).data('department_id');
                $('.department_' + department_to_show + '_category').toggle();
        });

        $( ".grid_category" ).click(function() {
                var department_to_show = $( this).data('department_id');
                var category_to_show = $( this).data('category_id');
//                $('#myModal').modal('hide');
//                $('#the_yield').html( '<%= image_tag 'spinner.gif' %>' );
//                $.get('store/browse?department_id=' + department_to_show  + '&category_id=' + category_to_show   , function(data) {
//                    $('#the_yield').html(data);
//                    alert('Load was performed.');
//                });
                data_url = '/store/browse?department_id=' + department_to_show  + '&category_id=' + category_to_show
                $('#modal-body').load(data_url);
        })
    });
</script>
<% end %>